{% extends "base.html" %}
{% load staticfiles %}


{% block title %}Students List{% endblock title %}


{% block nav_class_students %}active{% endblock %}


{% block content %}
  {% if messages %}
    {% for message in messages %}
      <div class="alert alert-{{ message.tags }}">
        <a href="#" class="close" data-dismiss="alert" aria-label="close">&times;</a>
        {{ message }}
      </div>
    {% endfor %}
  {% endif %}
  <div class="jumbotron">
    <a href="{% url 'students:add' %}" type="button" class="btn btn-success">
      <span class="glyphicon glyphicon-plus-sign"></span>Create new student</a>
    <h3 class="h3-textstyle">Students List:</h3>
    <table class="courses-list-table">
      <thead>
      <tr>
        <th>#</th>
        <th>Surname Name</th>
        <th>Address</th>
        <th>Skype</th>
        <th>Courses</th>
      </tr>
      </thead>
      <tbody>
      {% for item in student_list %}
        <tr>
          <td>{{forloop.counter}}</td>
          <td><a href="{% url 'students:detail' item.id %}">{{ item.surname }} {{ item.name }}</a></td>
          <td>{{ item.address }}</td>
          <td>{{ item.skype }}</td>
          <td>{% for i in item.courses.all %}
                <a href="{% url 'courses:detail' i.id %}">{{ i|linebreaks }}</a>
              {% endfor %}
          </td>
          <td><a href="{% url 'students:edit' item.pk %}" type="button" class="btn btn-success">
            <span class="glyphicon glyphicon-pencil"></span>Edit</a></td>
          <td><a href="{% url 'students:remove' item.pk %}" type="button" class="btn btn-danger">
            <span class="glyphicon glyphicon-remove-sign"></span>Delete</a></td>
        </tr>
      {% endfor %}
      </tbody>
    </table>
    {% if is_paginated %}
      <div>
        <ul class="pagination">
          {% if course_id %}
            {% with '&course_id='|add:course_id as var %}
              {% include 'include/pagination_include.html' %}
            {% endwith %}
          {% else %}
            {% with '' as var %}
              {% include 'include/pagination_include.html' %}
            {% endwith %}
          {% endif %}
        </ul>
      </div>
    {% endif %}
  </div>
{% endblock content %}
